var buttonImageFile="https://www.capemaylamer.com//images_noindex/ada-date-buttton.svg";var buttonImageFile2="https://www.capemaylamer.com//images_noindex/ada-white-buttton.svg";var dayNameSortString=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];$(document).ready(function(){if(document.getElementById('CHECKINDATE1')){$('#CHECKINDATE1').val(getTodayDateFromPC("Month dd, yyyy"));}
if(document.getElementById('CHECKOUTDATE1')){$('#CHECKOUTDATE1').val(getTodayDateFromPC("Month dd, yyyy",1));}
if(document.getElementById('FROMDATE')){$('#FROMDATE').val(getTodayDateFromPC("Month dd, yyyy"));}
if(document.getElementById('TODATE')){$('#TODATE').val(getTodayDateFromPC("Month dd, yyyy",1));}
if(!document.getElementById('datepicker')){$("body").append("<div style='display:none;'><input type='hidden' id='datepicker' /></div>");}
if(document.getElementById('checkindate')){$('#checkindate').val(getTodayDateFromPC("Month dd, yyyy"));}
if(document.getElementById('checkoutdate')){$('#checkoutdate').val(getTodayDateFromPC("Month dd, yyyy",1));}
if(document.getElementById('reminder-date')){$('#reminder-date').val(getTodayDateFromPC("Month dd, yyyy",1));}
var datePickerString='#checkindate, #checkoutdate, #checkindate1, #DATEPROPOSAL, #CHECKINDATE1, #CHECKOUTDATE1,#GCHECKINDATE, #GCHECKOUTDATE, #ALTERNATEDATES, #checkindate2, #checkoutdate2, #txtfromtop, #txttotop,#FROMDATE, #TODATE, #reminder-date';$(datePickerString).wrap("<div class='ada-datepicker'></div>");setADADatepicker("#reminder-date","Reminder date view calendar",buttonImageFile);setADADatepicker("#DATEPROPOSAL","Proposal date view calendar",buttonImageFile2);setADARangeDate("checkindate","checkoutdate","Check in date view calendar","Check out date view calendar",buttonImageFile);setADARangeDate("checkindate2","checkoutdate2","Check in date view calendar","Check out date view calendar",buttonImageFile2);setADARangeDate("FROMDATE","TODATE","Meeting start date view calendar","Meeting end date view calendar",buttonImageFile);setADARangeDate("CHECKINDATE1","CHECKOUTDATE1","Meeting start date view calendar","Meeting end date view calendar",buttonImageFile2);setADADatepicker("#checkindate1","Dining date view calendar",buttonImageFile2);setADADatepicker("#ALTERNATEDATES","Alternate date view calendar",buttonImageFile2);if($('#txtfromtop').length){$('#txtfromtop').datepicker({altFormat:'mm/dd/yy',showOn:'button',buttonImage:buttonImageFile2,buttonImageOnly:false,buttonText:'event start date view calender',dayNamesShort:dayNameSortString,showButtonPanel:true,closeText:'Close',onClose:function(){$("#dp-container").removeAttr('aria-hidden');$("#skipnav").removeAttr('aria-hidden');if($("#txtfromtop").val()!=""){var minDate=$("#txtfromtop").datepicker('getDate');minDate.setDate(minDate.getDate()+1);$("#txttotop").datepicker("option","minDate",minDate);$("#txtfromtop").parent().find(".ui-datepicker-trigger").focus();setNextDate("txtfromtop","txttotop");}
dayTripper();},onSelect:function(){$("#txtfromtop").parent().find(".ui-datepicker-trigger").focus();}});}
if($('#txttotop').length){$('#txttotop').datepicker({altFormat:'mm/dd/yy',showOn:'button',buttonImage:buttonImageFile2,buttonImageOnly:false,buttonText:'Event end date view calender',dayNamesShort:dayNameSortString,showButtonPanel:true,closeText:'Close',onClose:function(){$("#dp-container").removeAttr('aria-hidden');$("#skipnav").removeAttr('aria-hidden');$("#txttotop").parent().find(".ui-datepicker-trigger").focus();}});}
$(datePickerString).click(function(e){$(this).parent().find(".ui-datepicker-trigger").trigger("click");});$(datePickerString).keypress(function(e){if(e.keyCode==13){$(this).parent().find(".ui-datepicker-trigger").trigger("click");e.preventDefault();return false;}});dayTripper();});function setADARangeDate(Id1,Id2,title1,title2,imageURL){if($('#'+Id1).length){$('#'+Id1).datepicker({altFormat:'M dd, yy',dateFormat:'M dd, yy',minDate:0,showOn:'button',buttonImage:imageURL,buttonImageOnly:false,buttonText:title1,dayNamesShort:dayNameSortString,showButtonPanel:true,closeText:'Close',onClose:function(){$("#dp-container").removeAttr('aria-hidden');$("#skipnav").removeAttr('aria-hidden');if($(this).val()!=""){var minDate=$("#"+Id1).datepicker('getDate');minDate.setDate(minDate.getDate()+1);$("#"+Id2).datepicker("option","minDate",minDate);setNextDate(Id1,Id2);}
$(this).parent().find(".ui-datepicker-trigger").focus();dayTripper();},onSelect:function(){$(this).parent().find(".ui-datepicker-trigger").focus();}});}
if($('#'+Id2).length){$('#'+Id2).datepicker({altFormat:'M dd, yy',dateFormat:'M dd, yy',minDate:1,showOn:'button',buttonImage:imageURL,buttonImageOnly:false,buttonText:title2,dayNamesShort:dayNameSortString,showButtonPanel:true,closeText:'Close',onClose:function(){$("#dp-container").removeAttr('aria-hidden');$("#skipnav").removeAttr('aria-hidden');$(this).parent().find(".ui-datepicker-trigger").focus();}});}}
function setADADatepicker(dateID,dateLabel,imageURL){if($(dateID).length){$(dateID).datepicker({altFormat:'Month dd, yyyy',minDate:0,showOn:'button',buttonImage:imageURL,buttonImageOnly:false,buttonText:dateLabel,dayNamesShort:dayNameSortString,showButtonPanel:true,closeText:'Close',onClose:function(){$("#dp-container").removeAttr('aria-hidden');$("#skipnav").removeAttr('aria-hidden');$(this).parent().find(".ui-datepicker-trigger").focus();}});}}
function dayTripper(){$('.ui-datepicker-trigger').click(function(){setTimeout(function(){var today=$('.ui-datepicker-today a')[0];if(!today){today=$('.ui-state-active')[0]||$('.ui-state-default')[0];}
$("main").attr('id','dp-container');$("#dp-container").attr('aria-hidden','true');$("#skipnav").attr('aria-hidden','true');$(".ui-datepicker-current").hide();today.focus();datePickHandler();},0);});}
function datePickHandler(){var activeDate;var container=document.getElementById('ui-datepicker-div');var input=document.getElementById('datepicker');if(!container||!input){return;}
$(container).find('table').first().attr('role','grid');container.setAttribute('role','application');container.setAttribute('aria-label','Calendar view date-picker');var prev=$('.ui-datepicker-prev',container)[0],next=$('.ui-datepicker-next',container)[0];next.href='javascript:void(0)';prev.href='javascript:void(0)';next.setAttribute('role','button');next.removeAttribute('title');prev.setAttribute('role','button');prev.removeAttribute('title');appendOffscreenMonthText(next);appendOffscreenMonthText(prev);$(next).on('click',handleNextClicks);$(prev).on('click',handlePrevClicks);monthDayYearText();$(container).on('keydown',function calendarKeyboardListener(keyVent){var which=keyVent.which;var target=keyVent.target;var dateCurrent=getCurrentDate(container);if(!dateCurrent){dateCurrent=$('a.ui-state-default')[0];setHighlightState(dateCurrent,container);}
if(27===which){keyVent.stopPropagation();return closeCalendar();}else if(which===9&&keyVent.shiftKey){keyVent.preventDefault();if($(target).hasClass('ui-datepicker-close')){$('.ui-datepicker-prev')[0].focus();}else if($(target).hasClass('ui-state-default')){$('.ui-datepicker-close')[0].focus();}else if($(target).hasClass('ui-datepicker-prev')){$('.ui-datepicker-next')[0].focus();}else if($(target).hasClass('ui-datepicker-next')){activeDate=$('.ui-state-highlight')||$('.ui-state-active')[0];if(activeDate){activeDate.focus();}}}else if(which===9){keyVent.preventDefault();if($(target).hasClass('ui-datepicker-close')){activeDate=$('.ui-state-highlight')||$('.ui-state-active')[0];if(activeDate){activeDate.focus();}}else if($(target).hasClass('ui-state-default')){$('.ui-datepicker-next')[0].focus();}else if($(target).hasClass('ui-datepicker-next')){$('.ui-datepicker-prev')[0].focus();}else if($(target).hasClass('ui-datepicker-prev')){$('.ui-datepicker-close')[0].focus();}}else if(which===37){if(!$(target).hasClass('ui-datepicker-close')&&$(target).hasClass('ui-state-default')){keyVent.preventDefault();previousDay(target);}}else if(which===39){if(!$(target).hasClass('ui-datepicker-close')&&$(target).hasClass('ui-state-default')){keyVent.preventDefault();nextDay(target);}}else if(which===38){if(!$(target).hasClass('ui-datepicker-close')&&$(target).hasClass('ui-state-default')){keyVent.preventDefault();upHandler(target,container,prev);}}else if(which===40){if(!$(target).hasClass('ui-datepicker-close')&&$(target).hasClass('ui-state-default')){keyVent.preventDefault();downHandler(target,container,next);}}else if(which===13){if($(target).hasClass('ui-state-default')){setTimeout(function(){closeCalendar();},100);}else if($(target).hasClass('ui-datepicker-prev')){handlePrevClicks();}else if($(target).hasClass('ui-datepicker-next')){handleNextClicks();}}else if(32===which){if($(target).hasClass('ui-datepicker-prev')||$(target).hasClass('ui-datepicker-next')){target.click();}}else if(33===which){moveOneMonth(target,'prev');}else if(34===which){moveOneMonth(target,'next');}else if(36===which){var firstOfMonth=$(target).closest('tbody').find('.ui-state-default')[0];if(firstOfMonth){firstOfMonth.focus();setHighlightState(firstOfMonth,$('#ui-datepicker-div')[0]);}}else if(35===which){var $daysOfMonth=$(target).closest('tbody').find('.ui-state-default');var lastDay=$daysOfMonth[$daysOfMonth.length-1];if(lastDay){lastDay.focus();setHighlightState(lastDay,$('#ui-datepicker-div')[0]);}}
$(".ui-datepicker-current").hide();});}
function closeCalendar(){var container=$('#ui-datepicker-div');$(container).off('keydown');}
function removeAria(){$("#dp-container").removeAttr('aria-hidden');$("#skipnav").removeAttr('aria-hidden');}
function isOdd(num){return num%2;}
function moveOneMonth(currentDate,dir){var button=(dir==='next')?$('.ui-datepicker-next')[0]:$('.ui-datepicker-prev')[0];if(!button){return;}
var ENABLED_SELECTOR='#ui-datepicker-div tbody td:not(.ui-state-disabled)';var $currentCells=$(ENABLED_SELECTOR);var currentIdx=$.inArray(currentDate.parentNode,$currentCells);button.click();setTimeout(function(){updateHeaderElements();var $newCells=$(ENABLED_SELECTOR);var newTd=$newCells[currentIdx];var newAnchor=newTd&&$(newTd).find('a')[0];while(!newAnchor){currentIdx--;newTd=$newCells[currentIdx];newAnchor=newTd&&$(newTd).find('a')[0];}
setHighlightState(newAnchor,$('#ui-datepicker-div')[0]);newAnchor.focus();},0);}
function handleNextClicks(){setTimeout(function(){updateHeaderElements();prepHighlightState();$('.ui-datepicker-next').focus();$(".ui-datepicker-current").hide();},0);}
function handlePrevClicks(){setTimeout(function(){updateHeaderElements();prepHighlightState();$('.ui-datepicker-prev').focus();$(".ui-datepicker-current").hide();},0);}
function previousDay(dateLink){var container=document.getElementById('ui-datepicker-div');if(!dateLink){return;}
var td=$(dateLink).closest('td');if(!td){return;}
var prevTd=$(td).prev(),prevDateLink=$('a.ui-state-default',prevTd)[0];if(prevTd&&prevDateLink){setHighlightState(prevDateLink,container);prevDateLink.focus();}else{handlePrevious(dateLink);}}
function handlePrevious(target){var container=document.getElementById('ui-datepicker-div');if(!target){return;}
var currentRow=$(target).closest('tr');if(!currentRow){return;}
var previousRow=$(currentRow).prev();if(!previousRow||previousRow.length===0){previousMonth();}else{var prevRowDates=$('td a.ui-state-default',previousRow);var prevRowDate=prevRowDates[prevRowDates.length-1];if(prevRowDate){setTimeout(function(){setHighlightState(prevRowDate,container);prevRowDate.focus();},0);}}}
function previousMonth(){var prevLink=$('.ui-datepicker-prev')[0];var container=document.getElementById('ui-datepicker-div');prevLink.click();setTimeout(function(){var trs=$('tr',container),lastRowTdLinks=$('td a.ui-state-default',trs[trs.length-1]),lastDate=lastRowTdLinks[lastRowTdLinks.length-1];updateHeaderElements();setHighlightState(lastDate,container);lastDate.focus();},0);}
function nextDay(dateLink){var container=document.getElementById('ui-datepicker-div');if(!dateLink){return;}
var td=$(dateLink).closest('td');if(!td){return;}
var nextTd=$(td).next(),nextDateLink=$('a.ui-state-default',nextTd)[0];if(nextTd&&nextDateLink){setHighlightState(nextDateLink,container);nextDateLink.focus();}else{handleNext(dateLink);}}
function handleNext(target){var container=document.getElementById('ui-datepicker-div');if(!target){return;}
var currentRow=$(target).closest('tr'),nextRow=$(currentRow).next();if(!nextRow||nextRow.length===0){nextMonth();}else{var nextRowFirstDate=$('a.ui-state-default',nextRow)[0];if(nextRowFirstDate){setHighlightState(nextRowFirstDate,container);nextRowFirstDate.focus();}}}
function nextMonth(){nextMon=$('.ui-datepicker-next')[0];var container=document.getElementById('ui-datepicker-div');nextMon.click();setTimeout(function(){updateHeaderElements();var firstDate=$('a.ui-state-default',container)[0];setHighlightState(firstDate,container);firstDate.focus();},0);}
function upHandler(target,cont,prevLink){prevLink=$('.ui-datepicker-prev')[0];var rowContext=$(target).closest('tr');if(!rowContext){return;}
var rowTds=$('td',rowContext),rowLinks=$('a.ui-state-default',rowContext),targetIndex=$.inArray(target,rowLinks),prevRow=$(rowContext).prev(),prevRowTds=$('td',prevRow),parallel=prevRowTds[targetIndex],linkCheck=$('a.ui-state-default',parallel)[0];if(prevRow&&parallel&&linkCheck){setHighlightState(linkCheck,cont);linkCheck.focus();}else{prevLink.click();setTimeout(function(){updateHeaderElements();var newRows=$('tr',cont),lastRow=newRows[newRows.length-1],lastRowTds=$('td',lastRow),tdParallelIndex=$.inArray(target.parentNode,rowTds),newParallel=lastRowTds[tdParallelIndex],newCheck=$('a.ui-state-default',newParallel)[0];if(lastRow&&newParallel&&newCheck){setHighlightState(newCheck,cont);newCheck.focus();}else{var secondLastRow=newRows[newRows.length-2],secondTds=$('td',secondLastRow),targetTd=secondTds[tdParallelIndex],linkCheck=$('a.ui-state-default',targetTd)[0];if(linkCheck){setHighlightState(linkCheck,cont);linkCheck.focus();}}},0);}}
function downHandler(target,cont,nextLink){nextLink=$('.ui-datepicker-next')[0];var targetRow=$(target).closest('tr');if(!targetRow){return;}
var targetCells=$('td',targetRow),cellIndex=$.inArray(target.parentNode,targetCells),nextRow=$(targetRow).next(),nextRowCells=$('td',nextRow),nextWeekTd=nextRowCells[cellIndex],nextWeekCheck=$('a.ui-state-default',nextWeekTd)[0];if(nextRow&&nextWeekTd&&nextWeekCheck){setHighlightState(nextWeekCheck,cont);nextWeekCheck.focus();}else{nextLink.click();setTimeout(function(){updateHeaderElements();var nextMonthTrs=$('tbody tr',cont),firstTds=$('td',nextMonthTrs[0]),firstParallel=firstTds[cellIndex],firstCheck=$('a.ui-state-default',firstParallel)[0];if(firstParallel&&firstCheck){setHighlightState(firstCheck,cont);firstCheck.focus();}else{var secondRow=nextMonthTrs[1],secondTds=$('td',secondRow),secondRowTd=secondTds[cellIndex],secondCheck=$('a.ui-state-default',secondRowTd)[0];if(secondRow&&secondCheck){setHighlightState(secondCheck,cont);secondCheck.focus();}}},0);}}
function onCalendarHide(){closeCalendar();}
function monthDayYearText(){var cleanUps=$('.amaze-date');$(cleanUps).each(function(clean){clean.parentNode.removeChild(clean);});var datePickDiv=document.getElementById('ui-datepicker-div');if(!datePickDiv){return;}
var dates=$('a.ui-state-default',datePickDiv);$(dates).each(function(index,date){var currentRow=$(date).closest('tr'),currentTds=$('td',currentRow),currentIndex=$.inArray(date.parentNode,currentTds),headThs=$('thead tr th',datePickDiv),dayIndex=headThs[currentIndex],daySpan=$('span',dayIndex)[0],monthName=$('.ui-datepicker-month',datePickDiv)[0].innerHTML,year=$('.ui-datepicker-year',datePickDiv)[0].innerHTML,number=date.innerHTML;if(!daySpan||!monthName||!number||!year){return;}
var dateText=monthName+' '+date.innerHTML+' '+year+' '+daySpan.title;date.setAttribute('aria-label',dateText);});}
function updateHeaderElements(){var context=document.getElementById('ui-datepicker-div');if(!context){return;}
$(context).find('table').first().attr('role','grid');prev=$('.ui-datepicker-prev',context)[0];next=$('.ui-datepicker-next',context)[0];next.href='javascript:void(0)';prev.href='javascript:void(0)';next.setAttribute('role','button');prev.setAttribute('role','button');appendOffscreenMonthText(next);appendOffscreenMonthText(prev);$(next).on('click',handleNextClicks);$(prev).on('click',handlePrevClicks);monthDayYearText();}
function prepHighlightState(){var highlight;var cage=document.getElementById('ui-datepicker-div');highlight=$('.ui-state-highlight',cage)[0]||$('.ui-state-default',cage)[0];if(highlight&&cage){setHighlightState(highlight,cage);}}
function setHighlightState(newHighlight,container){var prevHighlight=getCurrentDate(container);$(prevHighlight).removeClass('ui-state-highlight');$(newHighlight).addClass('ui-state-highlight');}
function getCurrentDate(container){var currentDate=$('.ui-state-highlight',container)[0];return currentDate;}
function appendOffscreenMonthText(button){var buttonText;var isNext=$(button).hasClass('ui-datepicker-next');var months=['january','february','march','april','may','june','july','august','september','october','november','december'];var currentMonth=$('.ui-datepicker-title .ui-datepicker-month').text().toLowerCase();var monthIndex=$.inArray(currentMonth.toLowerCase(),months);var currentYear=$('.ui-datepicker-title .ui-datepicker-year').text().toLowerCase();var adjacentIndex=(isNext)?monthIndex+1:monthIndex-1;if(isNext&&currentMonth==='december'){currentYear=parseInt(currentYear,10)+1;adjacentIndex=0;}else if(!isNext&&currentMonth==='january'){currentYear=parseInt(currentYear,10)-1;adjacentIndex=months.length-1;}
buttonText=(isNext)?'Next Month, '+firstToCap(months[adjacentIndex])+' '+currentYear:'Previous Month, '+firstToCap(months[adjacentIndex])+' '+currentYear;$(button).find('.ui-icon').html(buttonText);}
function firstToCap(s){return s.charAt(0).toUpperCase()+s.slice(1);}
function getDateFromInteger(minDate){return(minDate.getMonth()+1)+"/"+minDate.getDate()+"/"+minDate.getFullYear();}
var isCloseDatePicker=true;function closeDatePicker(){if(isCloseDatePicker&&device!="mobile"){isCloseDatePicker=false;$("#TempInputTypeSelect").hide();$("#checkindate,#checkoutdate,#checkindate2,#checkoutdate2,#CHECKINDATE1,#CHECKOUTDATE1, #FROMDATE, #TODATE, #reminder-date").datepicker("hide");$("#checkindate,#checkoutdate,#checkindate2,#checkoutdate2,#CHECKINDATE1,#CHECKOUTDATE1,#FROMDATE, #TODATE, #reminder-date").blur();setTimeout(function(){isCloseDatePicker=true;},1000);}}
$(window).on('scroll resize orientationchange',function(){closeDatePicker();});